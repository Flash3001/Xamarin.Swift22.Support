<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="PlatformCheck" BeforeTargets="InjectReference" Condition="(('$(Platform)' != 'iPhone') AND  ('$(Platform)' != 'iPhoneSimulator'))">
    <Error  Text="$(MSBuildThisFileName) does not work on '$(Platform)' platform. Specify platform iPhone or iPhoneSimulator." />
  </Target>

  <Target Name="InjectReference" BeforeTargets="ResolveAssemblyReferences">
    <ItemGroup Condition="'$(Platform)' == 'iPhone' or '$(Platform)' == 'iPhoneSimulator'">
      <Reference Include="Xamarin.Swift22.Support, Version=2.2.0.0, Culture=neutral, processorArchitecture=MSIL">
        <HintPath>$(MSBuildThisFileDirectory)..\lib\xamarinios10\$(Platform)\Xamarin.Swift22.Support.dll</HintPath>
      </Reference>
    </ItemGroup>
  </Target>
</Project>